
 <IN_PROGRESS>:
================================================================================
Things I'm working on now --Ryan:

REACTIVATE THAT TEST WITHIN DESUGAR-PATTERN-MATCHING... AND FIX THE TYPE CHECKER!



================================================================================
TOOPTIMIZE:

*) Look at all uses of recover-type... this is a great source of inefficiency.


================================================================================

[2007.07.28]
 *) When not in debug mode, DEBUASSERT should not evaluate the val
    even when called (DEBUGASSERT pred val).  I think I initially
    conceived of that as a way to optionally assert a predicate on a
    value before returning it.  However, now I very frequently use
    that form of invocation just to get the better error message when the
    assertion fails.

[2007.07.27]
 *) I'm pretty confident that I can add a -fastprune option that would
    eliminated dead code very early (without type checking it!).
    While dangerous, I think this would be useful.  Perhaps it could
    be restricted a little to only prune official "standard library" code...

[2007.07.07]
 Need to use two threads and add a buffer for wsmlton's ensbox data acquisition.
 Also, can remove one copy of the data relative to how I do things right now.

[2007.07.03]
 *) Add Int64 to support proper timestamps in sigsegs.
 *) Need a binary file sink too..
 *) MLton FFI & ensbox data acquisition.

[2007.06.28]
    Add ws.early for running queries *without* running static elaborate.

[2007.05.29]
  *) Eventually reduce dependency on C++ features in wsc.
     In particular... tuples should not have constructors.

[2007.05.17]

  *) Need to make "using Matrix:Float;" work.

[2007.03.24]
  *) Because all these backends are a mess... it would be nice if the
     polymorphic printing were implemented in the language (in the
     compiler, at least).  We could generate abstract syntax for the
     printer functions in the compiler, then it wouldn't have to be
     implemented separately for each backend.

[2007.03.19]
  *) Oops, Array and Hashtable need to be treated like Ref too.

[2007.03.17]
  X) Add REF types!!!
  *) Wouldn't hurt to have haskell-style "sections"

[2007.03.13]
  *) Make dependencies on GSL and fftw non-static.

[2007.03.13]
  *) Check the prims handled by emit-c against the prim_defs list.

[2007.03.11]
  X) Revisit type aliases at some point.

[2007.03.09]
  *) It would be nice to make a manual "fuse-passes" function that
     fuses two passes defined with "define-pass".  This would be
     tricky and will probably just work for passes that return a single
     expression value as their intermediate form from the Expr function.

[2007.03.09] {Optimization todo-list}
These are the order that optimizations need to be implemented: 
  *) Copy-propogation
  *) De-boosting, manually managed memory for arrays especially
  *) (Non-optimization) replace stl vectors with plain C-arrays


[2007.03.08]
  *) I think I can make a good foreign interface that would allow
     pulling in all the GSL functions easily.

[2007.03.07]
 X) What happened to my work on that little syntax to bind projectors
    for a tuple-stream?

[2007.03.05]
 X) allow type assertions on state var declarations
 *) add += *=... couldn't hurt.

[2007.03.04]
 *) use boost shared_array rather than a shared_ptr to a Vector
 
[2007.03.02]
 *) uniform value printing
 *) remove dependence on $WAVESCOPED/Makefile in wsc process.

[2007.02.11]
 *) Initialize class-typed iterator state properly (not from within
    the {} of the constructor)

 *) How about ditching the current elaborator and putting a
    straightforward interpreter in its place.  It would evaluate
    lazily, and treat streams and streams as *values*.  It
    would make a single pass through the program.

[2007.02.07]
 X) Remove distributed Regiment primitives from wavescope compiles.
 ~~) Add general binary reader!
 *) Don't forget my syntax for binding stream-projectors.

[2007.01.27]

 *) Build .boot file.
 *) Finish implementing equality
 *) Make printed representations consistent between WS and WSC. 
 X) Push generic arith system to the front end.
 X) add ws.opt and wsc.opt targets for when performance is critical.

[2006.11.29]
 X) For distribution compile a separate regiment.opt for simulations.
    (The default checkout should be opt-level 2, DEBUG on.)

[2006.11.08]
 *) Move more into the simworld structure.  In particular, world
    xbound/ybound.  Maybe connectivity model also.

[2006.11.05]
 *) Change inliner to allow "lib" functions that don't inline (of
    appropriate type). [Did a weird hack for this instead.]

[2006.11.01]
  Should include optional Intermediate? check for define-pass to
verify that a user function produces a valid intermediate record.
It's very easy to accidentally return an expression where you were
supposed to return an intermediate record.

[2006.10.17~]

 *) Completing static-elaboration for effectful constructs
 ~~) Inserting grammars between passes. [Significant progress]
 ~~) Moving to generic-traversal for early passes. [2006.10]
 *) Fixing let, letrec, lazy-letrec.
    *) Make "let" not desugar... (for consistency with typing rules)
    *) Make letrec strict throughout the compiler.
 *) Would like to get the LAML Schemedoc stuff working again.

 ~~) Add matrix WS operations
   *) Also add more FFT ops (maybe stream-lifted version too) 


[2006.09.03]
  X) Do not desugar one-armed if in the parser!!!

[2006.09.01]
 *) I have NEVER taken advantage of the "test-this" convention, I should do away with it.

[2006.08.29]

 *) How much work would it be to track source locations?
  [2006.12.03]
  So what I would like to do is add a general association list of "info" to each term.
  This is analogous to the to a parameterized "expr 'a" type in ML.
  THEN I can remove certain hackish things.


[2006.08.02]

 *) Encapsulate thread related things into a threads.ss
 *) Is there any way to get "languages" working in PLT?
 X) Finish porting modules to common module format.


[2006.05.02]

 *) Unit tests for deglobalize2


[2006.04.03]

  *) Add type checking to TMs.
  X) Add type checking between all passes of the compiler.
  X) Add more custom grammar checks.
  X) (Maybe fix the system for grammar check errors, it's fundamentally
     broken and a hack.)
  X) Rework type system.
  X) Add and use generic traverse for Regiment as well as TML.
  *) Lift out certain Regiment utilities from individual passes into common files.


================================================================================
FINISHED:

<Done> [2005.10.19] Make the chez version use records.  Better safety that way.
Can't remember why I didn't originally.
<Done> [2006.10] Reorganizing files into a deeper hierarchy. [2006.10.17]

 X) I am going to need to add a pass to annotate the type of rators.
    Will need this to make the elaborator work right.

 X) Bringing PLT version back online.
   *) Move chez/alpha_lib to generic

 X) Porting over to common module system.

 X) sigseg_foreach (but no efficient support yet)

 X) Inserting type-checking between passes.
   ~) De-primitive-izing tuple, tupref [2006.10]

 X) Updating type checker to handle partially annotated programs.

